PLATFORM_MASTER = 'master-4.6'

pipeline {
    // by default run on the master node, since it's the only one with direct repo access
    agent { label 'master' }
    options {
        // no checkout needed
        skipDefaultCheckout()
        buildDiscarder(logRotator(numToKeepStr: '100'))
        timestamps()
    }
    stages {
        stage('Trigger build') {
            steps {
                script {
                    def branchJobName = BRANCH_NAME.replace('/', '%2F')
                    build job: "../../hivemq4-composite/${branchJobName}", wait: false
                }
            }
        }
    }
}